{"dependencies":[{"name":"socket.io-client","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":46,"index":46}}],"key":"LVgCyxgUdze/lYG0kA6DdCAztfM=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":47},"end":{"line":2,"column":39,"index":86}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"../store/chatStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":87},"end":{"line":3,"column":50,"index":137}}],"key":"PBMIuO+fV3PcxnuOy5nMmIwZhuM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"socketService\", {\n    enumerable: true,\n    get: function () {\n      return socketService;\n    }\n  });\n  var _socketIoClient = require(_dependencyMap[0], \"socket.io-client\");\n  var _expoConstants = require(_dependencyMap[1], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _storeChatStore = require(_dependencyMap[2], \"../store/chatStore\");\n  const API_URL = Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL || process.env.EXPO_PUBLIC_BACKEND_URL;\n  class SocketService {\n    socket = null;\n    userId = null;\n    connect(userId) {\n      if (this.socket?.connected) {\n        return;\n      }\n      this.userId = userId;\n      this.socket = (0, _socketIoClient.io)(API_URL, {\n        path: '/socket.io',\n        transports: ['websocket', 'polling'],\n        reconnection: true,\n        reconnectionDelay: 1000,\n        reconnectionAttempts: 5\n      });\n      this.setupListeners();\n    }\n    setupListeners() {\n      if (!this.socket) return;\n      this.socket.on('connect', () => {\n        console.log('Socket connected');\n        if (this.userId) {\n          this.authenticate(this.userId);\n        }\n      });\n      this.socket.on('disconnect', () => {\n        console.log('Socket disconnected');\n      });\n      this.socket.on('authenticated', data => {\n        console.log('Socket authenticated:', data);\n      });\n      this.socket.on('new_message', message => {\n        console.log('New message received:', message);\n        const {\n          addMessage\n        } = _storeChatStore.useChatStore.getState();\n        addMessage(message.chat_id, message);\n      });\n      this.socket.on('message_status', data => {\n        console.log('Message status update:', data);\n        const {\n          updateMessage\n        } = _storeChatStore.useChatStore.getState();\n        // Update message status in store\n      });\n      this.socket.on('message_reaction', data => {\n        console.log('Message reaction:', data);\n        // Handle reaction updates\n      });\n      this.socket.on('user_typing', data => {\n        console.log('User typing:', data);\n        const {\n          setTypingUser\n        } = _storeChatStore.useChatStore.getState();\n        setTypingUser(data.chat_id, data.user_id, data.is_typing);\n      });\n      this.socket.on('user_status', data => {\n        console.log('User status:', data);\n        // Update user online/offline status\n      });\n      this.socket.on('error', error => {\n        console.error('Socket error:', error);\n      });\n    }\n    authenticate(userId) {\n      this.socket?.emit('authenticate', {\n        user_id: userId\n      });\n    }\n    joinChat(chatId, userId) {\n      this.socket?.emit('join_chat', {\n        chat_id: chatId,\n        user_id: userId\n      });\n    }\n    leaveChat(chatId, userId) {\n      this.socket?.emit('leave_chat', {\n        chat_id: chatId,\n        user_id: userId\n      });\n    }\n    sendTyping(chatId, userId, isTyping) {\n      this.socket?.emit('typing', {\n        chat_id: chatId,\n        user_id: userId,\n        is_typing: isTyping\n      });\n    }\n    disconnect() {\n      if (this.socket) {\n        this.socket.disconnect();\n        this.socket = null;\n        this.userId = null;\n      }\n    }\n  }\n  const socketService = new SocketService();\n});","lineCount":120,"map":[[12,2,105,0,"Object"],[12,8,105,0],[12,9,105,0,"defineProperty"],[12,23,105,0],[12,24,105,0,"exports"],[12,31,105,0],[13,4,105,0,"enumerable"],[13,14,105,0],[14,4,105,0,"get"],[14,7,105,0],[14,18,105,0,"get"],[14,19,105,0],[15,6,105,0],[15,13,105,0,"socketService"],[15,26,105,0],[16,4,105,0],[17,2,105,0],[18,2,1,0],[18,6,1,0,"_socketIoClient"],[18,21,1,0],[18,24,1,0,"require"],[18,31,1,0],[18,32,1,0,"_dependencyMap"],[18,46,1,0],[19,2,2,0],[19,6,2,0,"_expoConstants"],[19,20,2,0],[19,23,2,0,"require"],[19,30,2,0],[19,31,2,0,"_dependencyMap"],[19,45,2,0],[20,2,2,0],[20,6,2,0,"Constants"],[20,15,2,0],[20,18,2,0,"_interopDefault"],[20,33,2,0],[20,34,2,0,"_expoConstants"],[20,48,2,0],[21,2,3,0],[21,6,3,0,"_storeChatStore"],[21,21,3,0],[21,24,3,0,"require"],[21,31,3,0],[21,32,3,0,"_dependencyMap"],[21,46,3,0],[22,2,5,0],[22,8,5,6,"API_URL"],[22,15,5,13],[22,18,5,16,"Constants"],[22,27,5,25],[22,28,5,25,"default"],[22,35,5,25],[22,36,5,26,"expoConfig"],[22,46,5,36],[22,48,5,38,"extra"],[22,53,5,43],[22,55,5,45,"EXPO_PUBLIC_BACKEND_URL"],[22,78,5,68],[22,82,5,72,"process"],[22,89,5,79],[22,90,5,80,"env"],[22,93,5,83],[22,94,5,84,"EXPO_PUBLIC_BACKEND_URL"],[22,117,5,107],[23,2,7,0],[23,8,7,6,"SocketService"],[23,21,7,19],[23,22,7,20],[24,4,8,10,"socket"],[24,10,8,16],[24,13,8,34],[24,17,8,38],[25,4,9,10,"userId"],[25,10,9,16],[25,13,9,34],[25,17,9,38],[26,4,11,2,"connect"],[26,11,11,9,"connect"],[26,12,11,10,"userId"],[26,18,11,24],[26,20,11,26],[27,6,12,4],[27,10,12,8],[27,14,12,12],[27,15,12,13,"socket"],[27,21,12,19],[27,23,12,21,"connected"],[27,32,12,30],[27,34,12,32],[28,8,13,6],[29,6,14,4],[30,6,16,4],[30,10,16,8],[30,11,16,9,"userId"],[30,17,16,15],[30,20,16,18,"userId"],[30,26,16,24],[31,6,18,4],[31,10,18,8],[31,11,18,9,"socket"],[31,17,18,15],[31,20,18,18],[31,24,18,18,"io"],[31,39,18,20],[31,40,18,20,"io"],[31,42,18,20],[31,44,18,21,"API_URL"],[31,51,18,28],[31,53,18,30],[32,8,19,6,"path"],[32,12,19,10],[32,14,19,12],[32,26,19,24],[33,8,20,6,"transports"],[33,18,20,16],[33,20,20,18],[33,21,20,19],[33,32,20,30],[33,34,20,32],[33,43,20,41],[33,44,20,42],[34,8,21,6,"reconnection"],[34,20,21,18],[34,22,21,20],[34,26,21,24],[35,8,22,6,"reconnectionDelay"],[35,25,22,23],[35,27,22,25],[35,31,22,29],[36,8,23,6,"reconnectionAttempts"],[36,28,23,26],[36,30,23,28],[37,6,24,4],[37,7,24,5],[37,8,24,6],[38,6,26,4],[38,10,26,8],[38,11,26,9,"setupListeners"],[38,25,26,23],[38,26,26,24],[38,27,26,25],[39,4,27,2],[40,4,29,10,"setupListeners"],[40,18,29,24,"setupListeners"],[40,19,29,24],[40,21,29,27],[41,6,30,4],[41,10,30,8],[41,11,30,9],[41,15,30,13],[41,16,30,14,"socket"],[41,22,30,20],[41,24,30,22],[42,6,32,4],[42,10,32,8],[42,11,32,9,"socket"],[42,17,32,15],[42,18,32,16,"on"],[42,20,32,18],[42,21,32,19],[42,30,32,28],[42,32,32,30],[42,38,32,36],[43,8,33,6,"console"],[43,15,33,13],[43,16,33,14,"log"],[43,19,33,17],[43,20,33,18],[43,38,33,36],[43,39,33,37],[44,8,34,6],[44,12,34,10],[44,16,34,14],[44,17,34,15,"userId"],[44,23,34,21],[44,25,34,23],[45,10,35,8],[45,14,35,12],[45,15,35,13,"authenticate"],[45,27,35,25],[45,28,35,26],[45,32,35,30],[45,33,35,31,"userId"],[45,39,35,37],[45,40,35,38],[46,8,36,6],[47,6,37,4],[47,7,37,5],[47,8,37,6],[48,6,39,4],[48,10,39,8],[48,11,39,9,"socket"],[48,17,39,15],[48,18,39,16,"on"],[48,20,39,18],[48,21,39,19],[48,33,39,31],[48,35,39,33],[48,41,39,39],[49,8,40,6,"console"],[49,15,40,13],[49,16,40,14,"log"],[49,19,40,17],[49,20,40,18],[49,41,40,39],[49,42,40,40],[50,6,41,4],[50,7,41,5],[50,8,41,6],[51,6,43,4],[51,10,43,8],[51,11,43,9,"socket"],[51,17,43,15],[51,18,43,16,"on"],[51,20,43,18],[51,21,43,19],[51,36,43,34],[51,38,43,37,"data"],[51,42,43,41],[51,46,43,46],[52,8,44,6,"console"],[52,15,44,13],[52,16,44,14,"log"],[52,19,44,17],[52,20,44,18],[52,43,44,41],[52,45,44,43,"data"],[52,49,44,47],[52,50,44,48],[53,6,45,4],[53,7,45,5],[53,8,45,6],[54,6,47,4],[54,10,47,8],[54,11,47,9,"socket"],[54,17,47,15],[54,18,47,16,"on"],[54,20,47,18],[54,21,47,19],[54,34,47,32],[54,36,47,35,"message"],[54,43,47,42],[54,47,47,47],[55,8,48,6,"console"],[55,15,48,13],[55,16,48,14,"log"],[55,19,48,17],[55,20,48,18],[55,43,48,41],[55,45,48,43,"message"],[55,52,48,50],[55,53,48,51],[56,8,49,6],[56,14,49,12],[57,10,49,14,"addMessage"],[58,8,49,25],[58,9,49,26],[58,12,49,29,"useChatStore"],[58,27,49,41],[58,28,49,41,"useChatStore"],[58,40,49,41],[58,41,49,42,"getState"],[58,49,49,50],[58,50,49,51],[58,51,49,52],[59,8,50,6,"addMessage"],[59,18,50,16],[59,19,50,17,"message"],[59,26,50,24],[59,27,50,25,"chat_id"],[59,34,50,32],[59,36,50,34,"message"],[59,43,50,41],[59,44,50,42],[60,6,51,4],[60,7,51,5],[60,8,51,6],[61,6,53,4],[61,10,53,8],[61,11,53,9,"socket"],[61,17,53,15],[61,18,53,16,"on"],[61,20,53,18],[61,21,53,19],[61,37,53,35],[61,39,53,38,"data"],[61,43,53,42],[61,47,53,47],[62,8,54,6,"console"],[62,15,54,13],[62,16,54,14,"log"],[62,19,54,17],[62,20,54,18],[62,44,54,42],[62,46,54,44,"data"],[62,50,54,48],[62,51,54,49],[63,8,55,6],[63,14,55,12],[64,10,55,14,"updateMessage"],[65,8,55,28],[65,9,55,29],[65,12,55,32,"useChatStore"],[65,27,55,44],[65,28,55,44,"useChatStore"],[65,40,55,44],[65,41,55,45,"getState"],[65,49,55,53],[65,50,55,54],[65,51,55,55],[66,8,56,6],[67,6,57,4],[67,7,57,5],[67,8,57,6],[68,6,59,4],[68,10,59,8],[68,11,59,9,"socket"],[68,17,59,15],[68,18,59,16,"on"],[68,20,59,18],[68,21,59,19],[68,39,59,37],[68,41,59,40,"data"],[68,45,59,44],[68,49,59,49],[69,8,60,6,"console"],[69,15,60,13],[69,16,60,14,"log"],[69,19,60,17],[69,20,60,18],[69,39,60,37],[69,41,60,39,"data"],[69,45,60,43],[69,46,60,44],[70,8,61,6],[71,6,62,4],[71,7,62,5],[71,8,62,6],[72,6,64,4],[72,10,64,8],[72,11,64,9,"socket"],[72,17,64,15],[72,18,64,16,"on"],[72,20,64,18],[72,21,64,19],[72,34,64,32],[72,36,64,35,"data"],[72,40,64,39],[72,44,64,44],[73,8,65,6,"console"],[73,15,65,13],[73,16,65,14,"log"],[73,19,65,17],[73,20,65,18],[73,34,65,32],[73,36,65,34,"data"],[73,40,65,38],[73,41,65,39],[74,8,66,6],[74,14,66,12],[75,10,66,14,"setTypingUser"],[76,8,66,28],[76,9,66,29],[76,12,66,32,"useChatStore"],[76,27,66,44],[76,28,66,44,"useChatStore"],[76,40,66,44],[76,41,66,45,"getState"],[76,49,66,53],[76,50,66,54],[76,51,66,55],[77,8,67,6,"setTypingUser"],[77,21,67,19],[77,22,67,20,"data"],[77,26,67,24],[77,27,67,25,"chat_id"],[77,34,67,32],[77,36,67,34,"data"],[77,40,67,38],[77,41,67,39,"user_id"],[77,48,67,46],[77,50,67,48,"data"],[77,54,67,52],[77,55,67,53,"is_typing"],[77,64,67,62],[77,65,67,63],[78,6,68,4],[78,7,68,5],[78,8,68,6],[79,6,70,4],[79,10,70,8],[79,11,70,9,"socket"],[79,17,70,15],[79,18,70,16,"on"],[79,20,70,18],[79,21,70,19],[79,34,70,32],[79,36,70,35,"data"],[79,40,70,39],[79,44,70,44],[80,8,71,6,"console"],[80,15,71,13],[80,16,71,14,"log"],[80,19,71,17],[80,20,71,18],[80,34,71,32],[80,36,71,34,"data"],[80,40,71,38],[80,41,71,39],[81,8,72,6],[82,6,73,4],[82,7,73,5],[82,8,73,6],[83,6,75,4],[83,10,75,8],[83,11,75,9,"socket"],[83,17,75,15],[83,18,75,16,"on"],[83,20,75,18],[83,21,75,19],[83,28,75,26],[83,30,75,29,"error"],[83,35,75,34],[83,39,75,39],[84,8,76,6,"console"],[84,15,76,13],[84,16,76,14,"error"],[84,21,76,19],[84,22,76,20],[84,37,76,35],[84,39,76,37,"error"],[84,44,76,42],[84,45,76,43],[85,6,77,4],[85,7,77,5],[85,8,77,6],[86,4,78,2],[87,4,80,2,"authenticate"],[87,16,80,14,"authenticate"],[87,17,80,15,"userId"],[87,23,80,29],[87,25,80,31],[88,6,81,4],[88,10,81,8],[88,11,81,9,"socket"],[88,17,81,15],[88,19,81,17,"emit"],[88,23,81,21],[88,24,81,22],[88,38,81,36],[88,40,81,38],[89,8,81,40,"user_id"],[89,15,81,47],[89,17,81,49,"userId"],[90,6,81,56],[90,7,81,57],[90,8,81,58],[91,4,82,2],[92,4,84,2,"joinChat"],[92,12,84,10,"joinChat"],[92,13,84,11,"chatId"],[92,19,84,25],[92,21,84,27,"userId"],[92,27,84,41],[92,29,84,43],[93,6,85,4],[93,10,85,8],[93,11,85,9,"socket"],[93,17,85,15],[93,19,85,17,"emit"],[93,23,85,21],[93,24,85,22],[93,35,85,33],[93,37,85,35],[94,8,85,37,"chat_id"],[94,15,85,44],[94,17,85,46,"chatId"],[94,23,85,52],[95,8,85,54,"user_id"],[95,15,85,61],[95,17,85,63,"userId"],[96,6,85,70],[96,7,85,71],[96,8,85,72],[97,4,86,2],[98,4,88,2,"leaveChat"],[98,13,88,11,"leaveChat"],[98,14,88,12,"chatId"],[98,20,88,26],[98,22,88,28,"userId"],[98,28,88,42],[98,30,88,44],[99,6,89,4],[99,10,89,8],[99,11,89,9,"socket"],[99,17,89,15],[99,19,89,17,"emit"],[99,23,89,21],[99,24,89,22],[99,36,89,34],[99,38,89,36],[100,8,89,38,"chat_id"],[100,15,89,45],[100,17,89,47,"chatId"],[100,23,89,53],[101,8,89,55,"user_id"],[101,15,89,62],[101,17,89,64,"userId"],[102,6,89,71],[102,7,89,72],[102,8,89,73],[103,4,90,2],[104,4,92,2,"sendTyping"],[104,14,92,12,"sendTyping"],[104,15,92,13,"chatId"],[104,21,92,27],[104,23,92,29,"userId"],[104,29,92,43],[104,31,92,45,"isTyping"],[104,39,92,62],[104,41,92,64],[105,6,93,4],[105,10,93,8],[105,11,93,9,"socket"],[105,17,93,15],[105,19,93,17,"emit"],[105,23,93,21],[105,24,93,22],[105,32,93,30],[105,34,93,32],[106,8,93,34,"chat_id"],[106,15,93,41],[106,17,93,43,"chatId"],[106,23,93,49],[107,8,93,51,"user_id"],[107,15,93,58],[107,17,93,60,"userId"],[107,23,93,66],[108,8,93,68,"is_typing"],[108,17,93,77],[108,19,93,79,"isTyping"],[109,6,93,88],[109,7,93,89],[109,8,93,90],[110,4,94,2],[111,4,96,2,"disconnect"],[111,14,96,12,"disconnect"],[111,15,96,12],[111,17,96,15],[112,6,97,4],[112,10,97,8],[112,14,97,12],[112,15,97,13,"socket"],[112,21,97,19],[112,23,97,21],[113,8,98,6],[113,12,98,10],[113,13,98,11,"socket"],[113,19,98,17],[113,20,98,18,"disconnect"],[113,30,98,28],[113,31,98,29],[113,32,98,30],[114,8,99,6],[114,12,99,10],[114,13,99,11,"socket"],[114,19,99,17],[114,22,99,20],[114,26,99,24],[115,8,100,6],[115,12,100,10],[115,13,100,11,"userId"],[115,19,100,17],[115,22,100,20],[115,26,100,24],[116,6,101,4],[117,4,102,2],[118,2,103,0],[119,2,105,7],[119,8,105,13,"socketService"],[119,21,105,26],[119,24,105,29],[119,28,105,33,"SocketService"],[119,41,105,46],[119,42,105,47],[119,43,105,48],[120,0,105,49],[120,3]],"functionMap":{"names":["<global>","SocketService","SocketService#connect","SocketService#setupListeners","on$argument_1","SocketService#authenticate","SocketService#joinChat","SocketService#leaveChat","SocketService#sendTyping","SocketService#disconnect"],"mappings":"AAA;ACM;ECI;GDgB;EEE;8BCG;KDK;iCCE;KDE;oCCE;KDE;kCCE;KDI;qCCE;KDI;uCCE;KDG;kCCE;KDI;kCCE;KDG;4BCE;KDE;GFC;EIE;GJE;EKE;GLE;EME;GNE;EOE;GPE;EQE;GRM;CDC"},"hasCjsExports":false},"type":"js/module"}]}
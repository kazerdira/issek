{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"socket.io-client","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":46,"index":46}}],"key":"LVgCyxgUdze/lYG0kA6DdCAztfM=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":47},"end":{"line":2,"column":39,"index":86}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"../store/chatStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":87},"end":{"line":3,"column":50,"index":137}}],"key":"PBMIuO+fV3PcxnuOy5nMmIwZhuM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"socketService\", {\n    enumerable: true,\n    get: function () {\n      return socketService;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _socketIoClient = require(_dependencyMap[1], \"socket.io-client\");\n  var _expoConstants = require(_dependencyMap[2], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _storeChatStore = require(_dependencyMap[3], \"../store/chatStore\");\n  const API_URL = Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL || _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n  class SocketService {\n    socket = null;\n    userId = null;\n    connect(userId) {\n      if (this.socket?.connected) {\n        return;\n      }\n      this.userId = userId;\n      this.socket = (0, _socketIoClient.io)(API_URL, {\n        path: '/socket.io',\n        transports: ['websocket', 'polling'],\n        reconnection: true,\n        reconnectionDelay: 1000,\n        reconnectionAttempts: 5\n      });\n      this.setupListeners();\n    }\n    setupListeners() {\n      if (!this.socket) return;\n      this.socket.on('connect', () => {\n        console.log('Socket connected');\n        if (this.userId) {\n          this.authenticate(this.userId);\n        }\n      });\n      this.socket.on('disconnect', () => {\n        console.log('Socket disconnected');\n      });\n      this.socket.on('authenticated', data => {\n        console.log('Socket authenticated:', data);\n      });\n      this.socket.on('new_message', message => {\n        console.log('New message received:', message);\n        const {\n          addMessage\n        } = _storeChatStore.useChatStore.getState();\n        addMessage(message.chat_id, message);\n      });\n      this.socket.on('message_status', data => {\n        console.log('Message status update:', data);\n        const {\n          updateMessage\n        } = _storeChatStore.useChatStore.getState();\n        // Update message status in store\n      });\n      this.socket.on('message_reaction', data => {\n        console.log('Message reaction:', data);\n        // Handle reaction updates\n      });\n      this.socket.on('user_typing', data => {\n        console.log('User typing:', data);\n        const {\n          setTypingUser\n        } = _storeChatStore.useChatStore.getState();\n        setTypingUser(data.chat_id, data.user_id, data.is_typing);\n      });\n      this.socket.on('user_status', data => {\n        console.log('User status:', data);\n        // Update user online/offline status\n      });\n      this.socket.on('error', error => {\n        console.error('Socket error:', error);\n      });\n    }\n    authenticate(userId) {\n      this.socket?.emit('authenticate', {\n        user_id: userId\n      });\n    }\n    joinChat(chatId, userId) {\n      this.socket?.emit('join_chat', {\n        chat_id: chatId,\n        user_id: userId\n      });\n    }\n    leaveChat(chatId, userId) {\n      this.socket?.emit('leave_chat', {\n        chat_id: chatId,\n        user_id: userId\n      });\n    }\n    sendTyping(chatId, userId, isTyping) {\n      this.socket?.emit('typing', {\n        chat_id: chatId,\n        user_id: userId,\n        is_typing: isTyping\n      });\n    }\n    disconnect() {\n      if (this.socket) {\n        this.socket.disconnect();\n        this.socket = null;\n        this.userId = null;\n      }\n    }\n  }\n  const socketService = new SocketService();\n});","lineCount":121,"map":[[12,2,105,0,"Object"],[12,8,105,0],[12,9,105,0,"defineProperty"],[12,23,105,0],[12,24,105,0,"exports"],[12,31,105,0],[13,4,105,0,"enumerable"],[13,14,105,0],[14,4,105,0,"get"],[14,7,105,0],[14,18,105,0,"get"],[14,19,105,0],[15,6,105,0],[15,13,105,0,"socketService"],[15,26,105,0],[16,4,105,0],[17,2,105,0],[18,2,105,49],[18,6,105,49,"_expoVirtualEnv"],[18,21,105,49],[18,24,105,49,"require"],[18,31,105,49],[18,32,105,49,"_dependencyMap"],[18,46,105,49],[19,2,1,0],[19,6,1,0,"_socketIoClient"],[19,21,1,0],[19,24,1,0,"require"],[19,31,1,0],[19,32,1,0,"_dependencyMap"],[19,46,1,0],[20,2,2,0],[20,6,2,0,"_expoConstants"],[20,20,2,0],[20,23,2,0,"require"],[20,30,2,0],[20,31,2,0,"_dependencyMap"],[20,45,2,0],[21,2,2,0],[21,6,2,0,"Constants"],[21,15,2,0],[21,18,2,0,"_interopDefault"],[21,33,2,0],[21,34,2,0,"_expoConstants"],[21,48,2,0],[22,2,3,0],[22,6,3,0,"_storeChatStore"],[22,21,3,0],[22,24,3,0,"require"],[22,31,3,0],[22,32,3,0,"_dependencyMap"],[22,46,3,0],[23,2,5,0],[23,8,5,6,"API_URL"],[23,15,5,13],[23,18,5,16,"Constants"],[23,27,5,25],[23,28,5,25,"default"],[23,35,5,25],[23,36,5,26,"expoConfig"],[23,46,5,36],[23,48,5,38,"extra"],[23,53,5,43],[23,55,5,45,"EXPO_PUBLIC_BACKEND_URL"],[23,78,5,68],[23,82,5,68,"_expoVirtualEnv"],[23,97,5,68],[23,98,5,68,"env"],[23,101,5,68],[23,102,5,68,"EXPO_PUBLIC_BACKEND_URL"],[23,125,5,107],[24,2,7,0],[24,8,7,6,"SocketService"],[24,21,7,19],[24,22,7,20],[25,4,8,10,"socket"],[25,10,8,16],[25,13,8,34],[25,17,8,38],[26,4,9,10,"userId"],[26,10,9,16],[26,13,9,34],[26,17,9,38],[27,4,11,2,"connect"],[27,11,11,9,"connect"],[27,12,11,10,"userId"],[27,18,11,24],[27,20,11,26],[28,6,12,4],[28,10,12,8],[28,14,12,12],[28,15,12,13,"socket"],[28,21,12,19],[28,23,12,21,"connected"],[28,32,12,30],[28,34,12,32],[29,8,13,6],[30,6,14,4],[31,6,16,4],[31,10,16,8],[31,11,16,9,"userId"],[31,17,16,15],[31,20,16,18,"userId"],[31,26,16,24],[32,6,18,4],[32,10,18,8],[32,11,18,9,"socket"],[32,17,18,15],[32,20,18,18],[32,24,18,18,"io"],[32,39,18,20],[32,40,18,20,"io"],[32,42,18,20],[32,44,18,21,"API_URL"],[32,51,18,28],[32,53,18,30],[33,8,19,6,"path"],[33,12,19,10],[33,14,19,12],[33,26,19,24],[34,8,20,6,"transports"],[34,18,20,16],[34,20,20,18],[34,21,20,19],[34,32,20,30],[34,34,20,32],[34,43,20,41],[34,44,20,42],[35,8,21,6,"reconnection"],[35,20,21,18],[35,22,21,20],[35,26,21,24],[36,8,22,6,"reconnectionDelay"],[36,25,22,23],[36,27,22,25],[36,31,22,29],[37,8,23,6,"reconnectionAttempts"],[37,28,23,26],[37,30,23,28],[38,6,24,4],[38,7,24,5],[38,8,24,6],[39,6,26,4],[39,10,26,8],[39,11,26,9,"setupListeners"],[39,25,26,23],[39,26,26,24],[39,27,26,25],[40,4,27,2],[41,4,29,10,"setupListeners"],[41,18,29,24,"setupListeners"],[41,19,29,24],[41,21,29,27],[42,6,30,4],[42,10,30,8],[42,11,30,9],[42,15,30,13],[42,16,30,14,"socket"],[42,22,30,20],[42,24,30,22],[43,6,32,4],[43,10,32,8],[43,11,32,9,"socket"],[43,17,32,15],[43,18,32,16,"on"],[43,20,32,18],[43,21,32,19],[43,30,32,28],[43,32,32,30],[43,38,32,36],[44,8,33,6,"console"],[44,15,33,13],[44,16,33,14,"log"],[44,19,33,17],[44,20,33,18],[44,38,33,36],[44,39,33,37],[45,8,34,6],[45,12,34,10],[45,16,34,14],[45,17,34,15,"userId"],[45,23,34,21],[45,25,34,23],[46,10,35,8],[46,14,35,12],[46,15,35,13,"authenticate"],[46,27,35,25],[46,28,35,26],[46,32,35,30],[46,33,35,31,"userId"],[46,39,35,37],[46,40,35,38],[47,8,36,6],[48,6,37,4],[48,7,37,5],[48,8,37,6],[49,6,39,4],[49,10,39,8],[49,11,39,9,"socket"],[49,17,39,15],[49,18,39,16,"on"],[49,20,39,18],[49,21,39,19],[49,33,39,31],[49,35,39,33],[49,41,39,39],[50,8,40,6,"console"],[50,15,40,13],[50,16,40,14,"log"],[50,19,40,17],[50,20,40,18],[50,41,40,39],[50,42,40,40],[51,6,41,4],[51,7,41,5],[51,8,41,6],[52,6,43,4],[52,10,43,8],[52,11,43,9,"socket"],[52,17,43,15],[52,18,43,16,"on"],[52,20,43,18],[52,21,43,19],[52,36,43,34],[52,38,43,37,"data"],[52,42,43,41],[52,46,43,46],[53,8,44,6,"console"],[53,15,44,13],[53,16,44,14,"log"],[53,19,44,17],[53,20,44,18],[53,43,44,41],[53,45,44,43,"data"],[53,49,44,47],[53,50,44,48],[54,6,45,4],[54,7,45,5],[54,8,45,6],[55,6,47,4],[55,10,47,8],[55,11,47,9,"socket"],[55,17,47,15],[55,18,47,16,"on"],[55,20,47,18],[55,21,47,19],[55,34,47,32],[55,36,47,35,"message"],[55,43,47,42],[55,47,47,47],[56,8,48,6,"console"],[56,15,48,13],[56,16,48,14,"log"],[56,19,48,17],[56,20,48,18],[56,43,48,41],[56,45,48,43,"message"],[56,52,48,50],[56,53,48,51],[57,8,49,6],[57,14,49,12],[58,10,49,14,"addMessage"],[59,8,49,25],[59,9,49,26],[59,12,49,29,"useChatStore"],[59,27,49,41],[59,28,49,41,"useChatStore"],[59,40,49,41],[59,41,49,42,"getState"],[59,49,49,50],[59,50,49,51],[59,51,49,52],[60,8,50,6,"addMessage"],[60,18,50,16],[60,19,50,17,"message"],[60,26,50,24],[60,27,50,25,"chat_id"],[60,34,50,32],[60,36,50,34,"message"],[60,43,50,41],[60,44,50,42],[61,6,51,4],[61,7,51,5],[61,8,51,6],[62,6,53,4],[62,10,53,8],[62,11,53,9,"socket"],[62,17,53,15],[62,18,53,16,"on"],[62,20,53,18],[62,21,53,19],[62,37,53,35],[62,39,53,38,"data"],[62,43,53,42],[62,47,53,47],[63,8,54,6,"console"],[63,15,54,13],[63,16,54,14,"log"],[63,19,54,17],[63,20,54,18],[63,44,54,42],[63,46,54,44,"data"],[63,50,54,48],[63,51,54,49],[64,8,55,6],[64,14,55,12],[65,10,55,14,"updateMessage"],[66,8,55,28],[66,9,55,29],[66,12,55,32,"useChatStore"],[66,27,55,44],[66,28,55,44,"useChatStore"],[66,40,55,44],[66,41,55,45,"getState"],[66,49,55,53],[66,50,55,54],[66,51,55,55],[67,8,56,6],[68,6,57,4],[68,7,57,5],[68,8,57,6],[69,6,59,4],[69,10,59,8],[69,11,59,9,"socket"],[69,17,59,15],[69,18,59,16,"on"],[69,20,59,18],[69,21,59,19],[69,39,59,37],[69,41,59,40,"data"],[69,45,59,44],[69,49,59,49],[70,8,60,6,"console"],[70,15,60,13],[70,16,60,14,"log"],[70,19,60,17],[70,20,60,18],[70,39,60,37],[70,41,60,39,"data"],[70,45,60,43],[70,46,60,44],[71,8,61,6],[72,6,62,4],[72,7,62,5],[72,8,62,6],[73,6,64,4],[73,10,64,8],[73,11,64,9,"socket"],[73,17,64,15],[73,18,64,16,"on"],[73,20,64,18],[73,21,64,19],[73,34,64,32],[73,36,64,35,"data"],[73,40,64,39],[73,44,64,44],[74,8,65,6,"console"],[74,15,65,13],[74,16,65,14,"log"],[74,19,65,17],[74,20,65,18],[74,34,65,32],[74,36,65,34,"data"],[74,40,65,38],[74,41,65,39],[75,8,66,6],[75,14,66,12],[76,10,66,14,"setTypingUser"],[77,8,66,28],[77,9,66,29],[77,12,66,32,"useChatStore"],[77,27,66,44],[77,28,66,44,"useChatStore"],[77,40,66,44],[77,41,66,45,"getState"],[77,49,66,53],[77,50,66,54],[77,51,66,55],[78,8,67,6,"setTypingUser"],[78,21,67,19],[78,22,67,20,"data"],[78,26,67,24],[78,27,67,25,"chat_id"],[78,34,67,32],[78,36,67,34,"data"],[78,40,67,38],[78,41,67,39,"user_id"],[78,48,67,46],[78,50,67,48,"data"],[78,54,67,52],[78,55,67,53,"is_typing"],[78,64,67,62],[78,65,67,63],[79,6,68,4],[79,7,68,5],[79,8,68,6],[80,6,70,4],[80,10,70,8],[80,11,70,9,"socket"],[80,17,70,15],[80,18,70,16,"on"],[80,20,70,18],[80,21,70,19],[80,34,70,32],[80,36,70,35,"data"],[80,40,70,39],[80,44,70,44],[81,8,71,6,"console"],[81,15,71,13],[81,16,71,14,"log"],[81,19,71,17],[81,20,71,18],[81,34,71,32],[81,36,71,34,"data"],[81,40,71,38],[81,41,71,39],[82,8,72,6],[83,6,73,4],[83,7,73,5],[83,8,73,6],[84,6,75,4],[84,10,75,8],[84,11,75,9,"socket"],[84,17,75,15],[84,18,75,16,"on"],[84,20,75,18],[84,21,75,19],[84,28,75,26],[84,30,75,29,"error"],[84,35,75,34],[84,39,75,39],[85,8,76,6,"console"],[85,15,76,13],[85,16,76,14,"error"],[85,21,76,19],[85,22,76,20],[85,37,76,35],[85,39,76,37,"error"],[85,44,76,42],[85,45,76,43],[86,6,77,4],[86,7,77,5],[86,8,77,6],[87,4,78,2],[88,4,80,2,"authenticate"],[88,16,80,14,"authenticate"],[88,17,80,15,"userId"],[88,23,80,29],[88,25,80,31],[89,6,81,4],[89,10,81,8],[89,11,81,9,"socket"],[89,17,81,15],[89,19,81,17,"emit"],[89,23,81,21],[89,24,81,22],[89,38,81,36],[89,40,81,38],[90,8,81,40,"user_id"],[90,15,81,47],[90,17,81,49,"userId"],[91,6,81,56],[91,7,81,57],[91,8,81,58],[92,4,82,2],[93,4,84,2,"joinChat"],[93,12,84,10,"joinChat"],[93,13,84,11,"chatId"],[93,19,84,25],[93,21,84,27,"userId"],[93,27,84,41],[93,29,84,43],[94,6,85,4],[94,10,85,8],[94,11,85,9,"socket"],[94,17,85,15],[94,19,85,17,"emit"],[94,23,85,21],[94,24,85,22],[94,35,85,33],[94,37,85,35],[95,8,85,37,"chat_id"],[95,15,85,44],[95,17,85,46,"chatId"],[95,23,85,52],[96,8,85,54,"user_id"],[96,15,85,61],[96,17,85,63,"userId"],[97,6,85,70],[97,7,85,71],[97,8,85,72],[98,4,86,2],[99,4,88,2,"leaveChat"],[99,13,88,11,"leaveChat"],[99,14,88,12,"chatId"],[99,20,88,26],[99,22,88,28,"userId"],[99,28,88,42],[99,30,88,44],[100,6,89,4],[100,10,89,8],[100,11,89,9,"socket"],[100,17,89,15],[100,19,89,17,"emit"],[100,23,89,21],[100,24,89,22],[100,36,89,34],[100,38,89,36],[101,8,89,38,"chat_id"],[101,15,89,45],[101,17,89,47,"chatId"],[101,23,89,53],[102,8,89,55,"user_id"],[102,15,89,62],[102,17,89,64,"userId"],[103,6,89,71],[103,7,89,72],[103,8,89,73],[104,4,90,2],[105,4,92,2,"sendTyping"],[105,14,92,12,"sendTyping"],[105,15,92,13,"chatId"],[105,21,92,27],[105,23,92,29,"userId"],[105,29,92,43],[105,31,92,45,"isTyping"],[105,39,92,62],[105,41,92,64],[106,6,93,4],[106,10,93,8],[106,11,93,9,"socket"],[106,17,93,15],[106,19,93,17,"emit"],[106,23,93,21],[106,24,93,22],[106,32,93,30],[106,34,93,32],[107,8,93,34,"chat_id"],[107,15,93,41],[107,17,93,43,"chatId"],[107,23,93,49],[108,8,93,51,"user_id"],[108,15,93,58],[108,17,93,60,"userId"],[108,23,93,66],[109,8,93,68,"is_typing"],[109,17,93,77],[109,19,93,79,"isTyping"],[110,6,93,88],[110,7,93,89],[110,8,93,90],[111,4,94,2],[112,4,96,2,"disconnect"],[112,14,96,12,"disconnect"],[112,15,96,12],[112,17,96,15],[113,6,97,4],[113,10,97,8],[113,14,97,12],[113,15,97,13,"socket"],[113,21,97,19],[113,23,97,21],[114,8,98,6],[114,12,98,10],[114,13,98,11,"socket"],[114,19,98,17],[114,20,98,18,"disconnect"],[114,30,98,28],[114,31,98,29],[114,32,98,30],[115,8,99,6],[115,12,99,10],[115,13,99,11,"socket"],[115,19,99,17],[115,22,99,20],[115,26,99,24],[116,8,100,6],[116,12,100,10],[116,13,100,11,"userId"],[116,19,100,17],[116,22,100,20],[116,26,100,24],[117,6,101,4],[118,4,102,2],[119,2,103,0],[120,2,105,7],[120,8,105,13,"socketService"],[120,21,105,26],[120,24,105,29],[120,28,105,33,"SocketService"],[120,41,105,46],[120,42,105,47],[120,43,105,48],[121,0,105,49],[121,3]],"functionMap":{"names":["<global>","SocketService","SocketService#connect","SocketService#setupListeners","on$argument_1","SocketService#authenticate","SocketService#joinChat","SocketService#leaveChat","SocketService#sendTyping","SocketService#disconnect"],"mappings":"AAA;ACM;ECI;GDgB;EEE;8BCG;KDK;iCCE;KDE;oCCE;KDE;kCCE;KDI;qCCE;KDI;uCCE;KDG;kCCE;KDI;kCCE;KDG;4BCE;KDE;GFC;EIE;GJE;EKE;GLE;EME;GNE;EOE;GPE;EQE;GRM;CDC"},"hasCjsExports":false},"type":"js/module"}]}